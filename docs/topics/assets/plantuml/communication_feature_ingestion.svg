<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1119px" preserveAspectRatio="none" style="width:858px;height:1119px;" version="1.1" viewBox="0 0 858 1119" width="858px" zoomAndPan="magnify"><defs><filter height="300%" id="fzxdv9af5z7ts" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fzxdv9af5z7ts)" height="198.4609" style="stroke:#000000;stroke-width:2.0;" width="543" x="10" y="106.6094"/><rect fill="#FFFFFF" filter="url(#fzxdv9af5z7ts)" height="677.0859" style="stroke:#000000;stroke-width:2.0;" width="772.5" x="69" y="319.0703"/><rect fill="#FFFFFF" filter="url(#fzxdv9af5z7ts)" height="241.8125" style="stroke:#000000;stroke-width:2.0;" width="474" x="79" y="344.4219"/><rect fill="#FFFFFF" filter="url(#fzxdv9af5z7ts)" height="388.9219" style="stroke:#000000;stroke-width:2.0;" width="645.5" x="186" y="600.2344"/><rect fill="#FFFFFF" filter="url(#fzxdv9af5z7ts)" height="356.5703" style="stroke:#000000;stroke-width:2.0;" width="625.5" x="196" y="625.5859"/><rect fill="#FFFFFF" filter="url(#fzxdv9af5z7ts)" height="230.8125" style="stroke:#000000;stroke-width:2.0;" width="503.5" x="308" y="744.3438"/><rect fill="#FFFFFF" filter="url(#fzxdv9af5z7ts)" height="61.7031" style="stroke:#000000;stroke-width:2.0;" width="197" x="604.5" y="906.4531"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="49" x2="49" y1="89.6094" y2="1013.1563"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="126" x2="126" y1="89.6094" y2="1013.1563"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="244" x2="244" y1="89.6094" y2="1013.1563"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="351" x2="351" y1="89.6094" y2="1013.1563"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="498" x2="498" y1="89.6094" y2="1013.1563"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="643.5" x2="643.5" y1="89.6094" y2="1013.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="20" y="86.5332">Provider</text><ellipse cx="49.5" cy="15" fill="#FEFECE" filter="url(#fzxdv9af5z7ts)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M49.5,23 L49.5,50 M36.5,31 L62.5,31 M49.5,50 L36.5,65 M49.5,50 L62.5,65 " fill="none" filter="url(#fzxdv9af5z7ts)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="20" y="1026.6895">Provider</text><ellipse cx="49.5" cy="1039.7656" fill="#FEFECE" filter="url(#fzxdv9af5z7ts)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M49.5,1047.7656 L49.5,1074.7656 M36.5,1055.7656 L62.5,1055.7656 M49.5,1074.7656 L36.5,1089.7656 M49.5,1074.7656 L62.5,1089.7656 " fill="none" filter="url(#fzxdv9af5z7ts)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#ADD8E6" filter="url(#fzxdv9af5z7ts)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="71" x="89" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="96" y="74.5332">Ingestion</text><rect fill="#ADD8E6" filter="url(#fzxdv9af5z7ts)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="71" x="89" y="1012.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="96" y="1033.6895">Ingestion</text><rect fill="#ADD8E6" filter="url(#fzxdv9af5z7ts)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="73" x="206" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="213" y="74.5332">Encoding</text><rect fill="#ADD8E6" filter="url(#fzxdv9af5z7ts)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="73" x="206" y="1012.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="213" y="1033.6895">Encoding</text><rect fill="#ADD8E6" filter="url(#fzxdv9af5z7ts)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="63" x="318" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="325" y="74.5332">Routing</text><rect fill="#ADD8E6" filter="url(#fzxdv9af5z7ts)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="63" x="318" y="1012.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="325" y="1033.6895">Routing</text><rect fill="#778899" filter="url(#fzxdv9af5z7ts)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="85" x="454" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="461" y="74.5332">Middleware</text><rect fill="#778899" filter="url(#fzxdv9af5z7ts)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="85" x="454" y="1012.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="71" x="461" y="1033.6895">Middleware</text><rect fill="#90EE90" filter="url(#fzxdv9af5z7ts)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="54" x="614.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="621.5" y="74.5332">Talent</text><rect fill="#90EE90" filter="url(#fzxdv9af5z7ts)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="54" x="614.5" y="1012.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="621.5" y="1033.6895">Talent</text><path d="M10,106.6094 L132,106.6094 L132,114.6094 L122,124.6094 L10,124.6094 L10,106.6094 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="198.4609" style="stroke:#000000;stroke-width:2.0;" width="543" x="10" y="106.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="77" x="25" y="121.1045">Ingest Event</text><line style="stroke:#A80036;stroke-width:1.0;" x1="496.5" x2="486.5" y1="163.6641" y2="159.6641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="496.5" x2="486.5" y1="163.6641" y2="167.6641"/><line style="stroke:#A80036;stroke-width:1.0;" x1="49.5" x2="497.5" y1="163.6641" y2="163.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="56.5" y="142.4561">IngestionMsg</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223" x="60.5" y="158.8076">[(PLATFORM_ID)/INGESTION_TOPIC]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="126.5" x2="136.5" y1="210.3672" y2="206.3672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="126.5" x2="136.5" y1="210.3672" y2="214.3672"/><line style="stroke:#A80036;stroke-width:1.0;" x1="126.5" x2="497.5" y1="210.3672" y2="210.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="143.5" y="189.1592">IngestionMsg</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="147.5" y="205.5107">[INGESTION_TOPIC]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="126.5" x2="168.5" y1="240.7188" y2="240.7188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="168.5" x2="168.5" y1="240.7188" y2="253.7188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="127.5" x2="168.5" y1="253.7188" y2="253.7188"/><polygon fill="#A80036" points="137.5,249.7188,127.5,253.7188,137.5,257.7188,133.5,253.7188" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="133.5" y="235.8623">CheckType()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="126.5" x2="168.5" y1="284.0703" y2="284.0703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="168.5" x2="168.5" y1="284.0703" y2="297.0703"/><line style="stroke:#A80036;stroke-width:1.0;" x1="127.5" x2="168.5" y1="297.0703" y2="297.0703"/><polygon fill="#A80036" points="137.5,293.0703,127.5,297.0703,137.5,301.0703,133.5,297.0703" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="133.5" y="279.2139">AssignMetaData()</text><path d="M69,319.0703 L134,319.0703 L134,327.0703 L124,337.0703 L69,337.0703 L69,319.0703 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="677.0859" style="stroke:#000000;stroke-width:2.0;" width="772.5" x="69" y="319.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="84" y="333.5654">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="217" x="149" y="332.4893">[if type is correct &amp; metadata assigned]</text><path d="M79,344.4219 L210,344.4219 L210,352.4219 L200,362.4219 L79,362.4219 L79,344.4219 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="241.8125" style="stroke:#000000;stroke-width:2.0;" width="474" x="79" y="344.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="86" x="94" y="358.917">Encode Event</text><line style="stroke:#A80036;stroke-width:1.0;" x1="496.5" x2="486.5" y1="401.4766" y2="397.4766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="496.5" x2="486.5" y1="401.4766" y2="405.4766"/><line style="stroke:#A80036;stroke-width:1.0;" x1="126.5" x2="497.5" y1="401.4766" y2="401.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="133.5" y="380.2686">FeatureIngestionMsg</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="137.5" y="396.6201">[ENCODING_TOPIC]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="244.5" x2="254.5" y1="448.1797" y2="444.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="244.5" x2="254.5" y1="448.1797" y2="452.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="244.5" x2="497.5" y1="448.1797" y2="448.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="261.5" y="426.9717">FeatureIngestionMsg</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="265.5" y="443.3232">[ENCODING_TOPIC]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="244.5" x2="286.5" y1="478.5313" y2="478.5313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="286.5" x2="286.5" y1="478.5313" y2="491.5313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="245.5" x2="286.5" y1="491.5313" y2="491.5313"/><polygon fill="#A80036" points="255.5,487.5313,245.5,491.5313,255.5,495.5313,251.5,491.5313" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="251.5" y="473.6748">GetFeature()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="244.5" x2="286.5" y1="521.8828" y2="521.8828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="286.5" x2="286.5" y1="521.8828" y2="534.8828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="245.5" x2="286.5" y1="534.8828" y2="534.8828"/><polygon fill="#A80036" points="255.5,530.8828,245.5,534.8828,255.5,538.8828,251.5,534.8828" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="251.5" y="517.0264">CheckHistory()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="244.5" x2="286.5" y1="565.2344" y2="565.2344"/><line style="stroke:#A80036;stroke-width:1.0;" x1="286.5" x2="286.5" y1="565.2344" y2="578.2344"/><line style="stroke:#A80036;stroke-width:1.0;" x1="245.5" x2="286.5" y1="578.2344" y2="578.2344"/><polygon fill="#A80036" points="255.5,574.2344,245.5,578.2344,255.5,582.2344,251.5,578.2344" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="251.5" y="560.3779">UpdateFeature()</text><path d="M186,600.2344 L251,600.2344 L251,608.2344 L241,618.2344 L186,618.2344 L186,600.2344 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="388.9219" style="stroke:#000000;stroke-width:2.0;" width="645.5" x="186" y="600.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="201" y="614.7295">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="99" x="266" y="613.6533">[if feature is valid]</text><path d="M196,625.5859 L331,625.5859 L331,633.5859 L321,643.5859 L196,643.5859 L196,625.5859 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="356.5703" style="stroke:#000000;stroke-width:2.0;" width="625.5" x="196" y="625.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="90" x="211" y="640.0811">Route Feature</text><line style="stroke:#A80036;stroke-width:1.0;" x1="496.5" x2="486.5" y1="682.6406" y2="678.6406"/><line style="stroke:#A80036;stroke-width:1.0;" x1="496.5" x2="486.5" y1="682.6406" y2="686.6406"/><line style="stroke:#A80036;stroke-width:1.0;" x1="244.5" x2="497.5" y1="682.6406" y2="682.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="251.5" y="661.4326">FeatureMsg</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="255.5" y="677.7842">[ROUTING_TOPIC]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="351.5" x2="361.5" y1="729.3438" y2="725.3438"/><line style="stroke:#A80036;stroke-width:1.0;" x1="351.5" x2="361.5" y1="729.3438" y2="733.3438"/><line style="stroke:#A80036;stroke-width:1.0;" x1="351.5" x2="497.5" y1="729.3438" y2="729.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="368.5" y="708.1357">FeatureMsg</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="372.5" y="724.4873">[ROUTNING_TOPIC]</text><path d="M308,744.3438 L381,744.3438 L381,752.3438 L371,762.3438 L308,762.3438 L308,744.3438 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="230.8125" style="stroke:#000000;stroke-width:2.0;" width="503.5" x="308" y="744.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="323" y="758.8389">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="149" x="396" y="757.7627">[for all subscribed Talents]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="351.5" x2="393.5" y1="785.0469" y2="785.0469"/><line style="stroke:#A80036;stroke-width:1.0;" x1="393.5" x2="393.5" y1="785.0469" y2="798.0469"/><line style="stroke:#A80036;stroke-width:1.0;" x1="352.5" x2="393.5" y1="798.0469" y2="798.0469"/><polygon fill="#A80036" points="362.5,794.0469,352.5,798.0469,362.5,802.0469,358.5,798.0469" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="358.5" y="780.1904">EvaluateRules()</text><line style="stroke:#A80036;stroke-width:1.0;" x1="496.5" x2="486.5" y1="844.75" y2="840.75"/><line style="stroke:#A80036;stroke-width:1.0;" x1="496.5" x2="486.5" y1="844.75" y2="848.75"/><line style="stroke:#A80036;stroke-width:1.0;" x1="351.5" x2="497.5" y1="844.75" y2="844.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="358.5" y="823.542">FeatureEventMsg</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="362.5" y="839.8936">[&lt;TALENT_TOPIC&gt;]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="641.5" x2="631.5" y1="891.4531" y2="887.4531"/><line style="stroke:#A80036;stroke-width:1.0;" x1="641.5" x2="631.5" y1="891.4531" y2="895.4531"/><line style="stroke:#A80036;stroke-width:1.0;" x1="498.5" x2="642.5" y1="891.4531" y2="891.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="505.5" y="870.2451">FeatureEventMsg</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="509.5" y="886.5967">[&lt;TALENT_TOPIC&gt;]</text><path d="M604.5,906.4531 L796.5,906.4531 L796.5,914.4531 L786.5,924.4531 L604.5,924.4531 L604.5,906.4531 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="61.7031" style="stroke:#000000;stroke-width:2.0;" width="197" x="604.5" y="906.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="147" x="619.5" y="920.9482">Execute Business Code</text><line style="stroke:#A80036;stroke-width:1.0;" x1="643.5" x2="685.5" y1="947.1563" y2="947.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="685.5" x2="685.5" y1="947.1563" y2="960.1563"/><line style="stroke:#A80036;stroke-width:1.0;" x1="644.5" x2="685.5" y1="960.1563" y2="960.1563"/><polygon fill="#A80036" points="654.5,956.1563,644.5,960.1563,654.5,964.1563,650.5,960.1563" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="650.5" y="942.2998">OnEvent()</text><text fill="#888888" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="151" x="700.5" y="1111.1465">IoT Event Analytics Version: 0.5</text><!--MD5=[3261e7438911349aedd1bc27cd3e12a5]
@startuml
/'
  Copyright (c) 2021 Bosch.IO GmbH

  This Source Code Form is subject to the terms of the Mozilla Public
  License, v. 2.0. If a copy of the MPL was not distributed with this
  file, You can obtain one at https://mozilla.org/MPL/2.0/.

  SPDX-License-Identifier: MPL-2.0
'/

    skinparam backgroundColor #FFFFF

    right footer "IoT Event Analytics Version: 0.5"

    actor "Provider" as Provider

    participant Ingestion as Ingestion #LightBlue
    participant Encoding as Encoding #LightBlue
    participant Routing as Routing #LightBlue

    participant Middleware as Middleware #LightSlateGray

    participant Talent as Talent #LightGreen

    group Ingest Event
        Provider ->> Middleware: IngestionMsg \n [(PLATFORM_ID)/INGESTION_TOPIC]
        Middleware ->> Ingestion: IngestionMsg \n [INGESTION_TOPIC]

        Ingestion -> Ingestion: CheckType()
        Ingestion -> Ingestion: AssignMetaData()
    end

    opt if type is correct & metadata assigned
        group Encode Event
            Ingestion ->> Middleware: FeatureIngestionMsg \n [ENCODING_TOPIC]
            Middleware ->> Encoding: FeatureIngestionMsg \n [ENCODING_TOPIC]

            Encoding -> Encoding: GetFeature()
            Encoding -> Encoding: CheckHistory()
            Encoding -> Encoding: UpdateFeature()
        end

        opt if feature is valid
            group Route Feature
                Encoding ->> Middleware: FeatureMsg \n [ROUTING_TOPIC]
                Middleware ->> Routing: FeatureMsg \n [ROUTNING_TOPIC]
                loop for all subscribed Talents
                    Routing -> Routing: EvaluateRules()
                    Routing ->> Middleware: FeatureEventMsg \n [<TALENT_TOPIC>]
                    Middleware ->> Talent: FeatureEventMsg \n [<TALENT_TOPIC>]
                    group Execute Business Code
                        Talent -> Talent: OnEvent()
                    end
                end
            end
        end
    end


@enduml

@startuml

    skinparam backgroundColor #FFFFF

    right footer "IoT Event Analytics Version: 0.5"

    actor "Provider" as Provider

    participant Ingestion as Ingestion #LightBlue
    participant Encoding as Encoding #LightBlue
    participant Routing as Routing #LightBlue

    participant Middleware as Middleware #LightSlateGray

    participant Talent as Talent #LightGreen

    group Ingest Event
        Provider ->> Middleware: IngestionMsg \n [(PLATFORM_ID)/INGESTION_TOPIC]
        Middleware ->> Ingestion: IngestionMsg \n [INGESTION_TOPIC]

        Ingestion -> Ingestion: CheckType()
        Ingestion -> Ingestion: AssignMetaData()
    end

    opt if type is correct & metadata assigned
        group Encode Event
            Ingestion ->> Middleware: FeatureIngestionMsg \n [ENCODING_TOPIC]
            Middleware ->> Encoding: FeatureIngestionMsg \n [ENCODING_TOPIC]

            Encoding -> Encoding: GetFeature()
            Encoding -> Encoding: CheckHistory()
            Encoding -> Encoding: UpdateFeature()
        end

        opt if feature is valid
            group Route Feature
                Encoding ->> Middleware: FeatureMsg \n [ROUTING_TOPIC]
                Middleware ->> Routing: FeatureMsg \n [ROUTNING_TOPIC]
                loop for all subscribed Talents
                    Routing -> Routing: EvaluateRules()
                    Routing ->> Middleware: FeatureEventMsg \n [<TALENT_TOPIC>]
                    Middleware ->> Talent: FeatureEventMsg \n [<TALENT_TOPIC>]
                    group Execute Business Code
                        Talent -> Talent: OnEvent()
                    end
                end
            end
        end
    end


@enduml

PlantUML version 1.2021.00(Sun Jan 10 11:25:05 CET 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>